-- 자유게시판 시퀀스
DROP SEQUENCE FBOARD_SEQ;
CREATE SEQUENCE FBOARD_SEQ;

-- 자유게시판댓글 시퀀스
DROP SEQUENCE FB_COMMENT_SEQ;
CREATE SEQUENCE FB_COMMENT_SEQ;

-- FINDERMEMBERS INSERT문(주석처리한부분 PROFINDER.SQL에서 이미 생성됨)
--INSERT INTO FINDERMEMBERS (F_EMAIL, F_PW, F_NAME, F_NICKNAME, F_TEL1, F_TEL2, F_TEL3, F_ACCOUNTNUM, F_BANK, F_AREA, F_PHOTO1,F_MESSAGE, F_PHOTO2)
--    VALUES('hyun1330@naver.com', '11', '정성훈', '정성훈', '010', '3976', '2237', '302-0778-5449-11', '농협', '서울', '사진1', '메세지', '사진2');
-- FINDERMEMBERS 이메일 중복 확인  / 회원정보 MODEL에 저장 /  SELECT문
SELECT COUNT(*) FROM FINDERMEMBERS WHERE F_EMAIL='hyun1330@naver.com';
-- FINDERMEMBERS 닉네임중복확인
SELECT COUNT(*) FROM FINDERMEMBERS WHERE F_NICKNAME='';

-- 분야 INSERT (주석처리한부분 profinder.sql에서 이미 생성됨)
SELECT * FROM CATEGORY;
--INSERT INTO CATEGORY VALUES(1,'국어');
--INSERT INTO CATEGORY VALUES(2,'영어');
--INSERT INTO CATEGORY VALUES(3,'수학');
--INSERT INTO CATEGORY VALUES(4,'과학');
--INSERT INTO CATEGORY VALUES(5,'사회');


-- PROMEMBERS INSERT문(주석처리한부분 PROFINDER.SQL에서 이미 생성됨)
SELECT * FROM PROMEMBERS;
--INSERT INTO PROMEMBERS(P_EMAIL, P_PW, P_NAME,P_NICKNAME, P_TEL1, P_TEL2, P_TEL3, P_ACCOUNTNUM, P_BANK, P_AREA,P_PHOTO1, P_MESSAGE, P_PHOTO2, CATE_NUM)
--    VALUES('hyun1330@naver.com', '22', '정성훈', '정성훈', '010', '3976', '2237', '302-0778-5449-11', '농협', '서울', '사진1','메세지','사진2', 1);
-- PROMEMBERS 이메일 중복 확인  / 회원정보 MODEL에 저장 /  SELECT문
SELECT * FROM PROMEMBERS WHERE P_EMAIL='hyun1330@naver.com';
-- PROMEMBERS 닉네임 중복확인
SELECT COUNT(*) FROM PROMEMBERS WHERE P_NICKNAME='';

/* FBOARD */
--FBOARD INSERT문(주석처리한부분 PROFINDER.SQL에서 이미 생성됨)
INSERT INTO FBOARD(FB_NUM, FB_NAME, FB_TITLE, FB_CONTENT, FB_PHOTO, FB_IP)
    VALUES('FBOARD'||FBOARD_SEQ.NEXTVAL, '이름', '제목', '본문', '사진1', '아이피');

-- FBOARD SELECT(LIST)문
SELECT F.*, FD.F_PHOTO1, P.P_PHOTO1 FROM FBOARD F, PROMEMBERS P, FINDERMEMBERS FD
    WHERE F.FB_NAME = P.P_NICKNAME OR F.FB_NAME = FD.F_NICKNAME;
SELECT * FROM FBOARD FB,PROMEMBERS P ,FINDERMEMBERS F
    WHERE (FB.FB_NAME = P.P_NICKNAME) OR (FB.FB_NAME = F.F_NICKNAME) 
    ORDER BY FB.FB_DATE;
SELECT FB.* FROM FBOARD FB
    WHERE FB.FB_NAME IN(SELECT P_NICKNAME FROM PROMEMBERS)
    OR FB.FB_NAME IN(SELECT F_NICKNAME FROM FINDERMEMBERS);
    
SELECT * FROM
    (SELECT ROWNUM RN, A.* FROM
    (SELECT * FROM FBOARD ORDER BY FB_NUM DESC) A)
    WHERE RN BETWEEN 1 AND 10;
    
-- FBOARD UPDATE문
UPDATE FBOARD SET FB_TITLE = '제목1', FB_CONTENT='본문1'
    WHERE FB_NUM='FBOARD7';
-- FBOARD CONTENT문
SELECT * FROM FBOARD WHERE FB_NUM='FBOARD1';
-- FBOARD DELETE문
DELETE FROM FBOARD WHERE FB_NUM='FBOARD2';
-- FBOARD TOTAL
SELECT COUNT(*) FROM FBOARD;
UPDATE FBOARD SET FB_HIT = FB_HIT + 1 WHERE FB_NUM='FBOARD3';
-- FB_COMMENT LIST문
SELECT * FROM
    (SELECT ROWNUM RN, A.* FROM
    (SELECT FB.* FROM FB_COMMENT FB, FBOARD F WHERE F.FB_NUM='FBOARD4' AND F.FB_NUM = FB.FB_NUM ORDER BY FB.FC_GROUP DESC) A)
    WHERE RN BETWEEN 1 AND 10;
-- FB_COMMENT INSERT문
INSERT INTO FB_COMMENT(FC_NUM, FB_NUM, FC_NAME, FC_CONTENT, FC_GROUP, FC_PHOTO, FC_REF, FC_IP)
    VALUES('FB_COMMENT'||FB_COMMENT_SEQ.NEXTVAL, 'FBOARD16', '이름', '댓글내용', 0, 'FB_COMMENT'||FB_COMMENT_SEQ.CURRVAL, 'IP');
SELECT * FROM FB_COMMENT WHERE FC_NUM = 'FB_COMMENT8';
INSERT INTO FB_COMMENT(FC_NUM, FB_NUM, FC_NAME, FC_CONTENT, FC_GROUP,FC_INDENT, FC_REF, FC_IP)
    VALUES('FB_COMMENT'||FB_COMMENT_SEQ.NEXTVAL, 'FBOARD1', '이름', '대댓글', 'FB_COMMENT1_1', 1, 'FB_COMMENT1', '아이피');
    
INSERT INTO FB_COMMENT(FC_NUM, FB_NUM, FC_NAME, FC_CONTENT, FC_PHOTO, FC_GROUP, FC_IP)
    	VALUES('FB_COMMENT'||FB_COMMENT_SEQ.NEXTVAL, 'FBOARD1', '이름', '본문', '사진', 'FB_COMMENT'||FB_COMMENT_SEQ.CURRVAL, '아이피');
COMMIT;